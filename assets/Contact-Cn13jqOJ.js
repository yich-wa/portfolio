import{r as o,u as Se,c as Pe,b as Ee,_ as _e,p as Re,U as B,T as ae,t as le,j as n,d as Le,e as Ne,g as Te,f as He,h as Ae,i as Ce,R as j,C as Fe}from"./index-ve0hBgJY.js";import{B as ke}from"./Button-cfSZSbSB.js";const F=new B,Y=new B,Oe=new B;function We(t,e,r){const i=F.setFromMatrixPosition(t.matrixWorld);i.project(e);const s=r.width/2,a=r.height/2;return[i.x*s+s,-(i.y*a)+a]}function De(t,e){const r=F.setFromMatrixPosition(t.matrixWorld),i=Y.setFromMatrixPosition(e.matrixWorld),s=r.sub(i),a=e.getWorldDirection(Oe);return s.angleTo(a)>Math.PI/2}function Ie(t,e,r,i){const s=F.setFromMatrixPosition(t.matrixWorld),a=s.clone();a.project(e),r.setFromCamera(a,e);const l=r.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(r.ray.origin)<u}return!0}function $e(t,e){if(e instanceof ae)return e.zoom;if(e instanceof le){const r=F.setFromMatrixPosition(t.matrixWorld),i=Y.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,a=r.distanceTo(i);return 1/(2*Math.tan(s/2)*a)}else return 1}function Be(t,e,r){if(e instanceof le||e instanceof ae){const i=F.setFromMatrixPosition(t.matrixWorld),s=Y.setFromMatrixPosition(e.matrixWorld),a=i.distanceTo(s),l=(r[1]-r[0])/(e.far-e.near),u=r[1]-l*e.far;return Math.round(l*a+u)}}const U=t=>Math.abs(t)<1e-10?0:t;function ce(t,e,r=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=U(e[s]*t.elements[s])+(s!==15?",":")");return r+i}const ze=(t=>e=>ce(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),qe=(t=>(e,r)=>ce(e,t(r),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function Ve(t){return t&&typeof t=="object"&&"current"in t}const Ge=o.forwardRef(({children:t,eps:e=.001,style:r,className:i,prepend:s,center:a,fullscreen:l,portal:u,distanceFactor:b,sprite:k=!1,transform:d=!1,occlude:m,onOcclude:E,castShadow:L,receiveShadow:N,material:T,geometry:Z,zIndexRange:O=[16777271,0],calculatePosition:K=We,as:de="div",wrapperClass:z,pointerEvents:J="auto",...v},X)=>{const{gl:Q,camera:h,scene:ee,size:x,raycaster:he,events:fe,viewport:xe}=Se(),[f]=o.useState(()=>document.createElement(de)),q=o.useRef(),g=o.useRef(null),te=o.useRef(0),W=o.useRef([0,0]),H=o.useRef(null),V=o.useRef(null),_=(u==null?void 0:u.current)||fe.connected||Q.domElement.parentNode,w=o.useRef(null),D=o.useRef(!1),I=o.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&Ve(m[0]),[m]);o.useLayoutEffect(()=>{const p=Q.domElement;m&&m==="blending"?(p.style.zIndex=`${Math.floor(O[0]/2)}`,p.style.position="absolute",p.style.pointerEvents="none"):(p.style.zIndex=null,p.style.position=null,p.style.pointerEvents=null)},[m]),o.useLayoutEffect(()=>{if(g.current){const p=q.current=Pe(f);if(ee.updateMatrixWorld(),d)f.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const c=K(g.current,h,x);f.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${c[0]}px,${c[1]}px,0);transform-origin:0 0;`}return _&&(s?_.prepend(f):_.appendChild(f)),()=>{_&&_.removeChild(f),p.unmount()}}},[_,d]),o.useLayoutEffect(()=>{z&&(f.className=z)},[z]);const se=o.useMemo(()=>d?{position:"absolute",top:0,left:0,width:x.width,height:x.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:a?"translate3d(-50%,-50%,0)":"none",...l&&{top:-x.height/2,left:-x.width/2,width:x.width,height:x.height},...r},[r,a,l,x,d]),pe=o.useMemo(()=>({position:"absolute",pointerEvents:J}),[J]);o.useLayoutEffect(()=>{if(D.current=!1,d){var p;(p=q.current)==null||p.render(o.createElement("div",{ref:H,style:se},o.createElement("div",{ref:V,style:pe},o.createElement("div",{ref:X,className:i,style:r,children:t}))))}else{var c;(c=q.current)==null||c.render(o.createElement("div",{ref:X,style:se,className:i,children:t}))}});const R=o.useRef(!0);Ee(p=>{if(g.current){h.updateMatrixWorld(),g.current.updateWorldMatrix(!0,!1);const c=d?W.current:K(g.current,h,x);if(d||Math.abs(te.current-h.zoom)>e||Math.abs(W.current[0]-c[0])>e||Math.abs(W.current[1]-c[1])>e){const M=De(g.current,h);let y=!1;I&&(Array.isArray(m)?y=m.map(S=>S.current):m!=="blending"&&(y=[ee]));const A=R.current;if(y){const S=Ie(g.current,h,he,y);R.current=S&&!M}else R.current=!M;A!==R.current&&(E?E(!R.current):f.style.display=R.current?"block":"none");const $=Math.floor(O[0]/2),ge=m?I?[O[0],$]:[$-1,0]:O;if(f.style.zIndex=`${Be(g.current,h,ge)}`,d){const[S,re]=[x.width/2,x.height/2],G=h.projectionMatrix.elements[5]*re,{isOrthographicCamera:oe,top:ve,left:ye,bottom:je,right:be}=h,we=ze(h.matrixWorldInverse),Me=oe?`scale(${G})translate(${U(-(be+ye)/2)}px,${U((ve+je)/2)}px)`:`translateZ(${G}px)`;let P=g.current.matrixWorld;k&&(P=h.matrixWorldInverse.clone().transpose().copyPosition(P).scale(g.current.scale),P.elements[3]=P.elements[7]=P.elements[11]=0,P.elements[15]=1),f.style.width=x.width+"px",f.style.height=x.height+"px",f.style.perspective=oe?"":`${G}px`,H.current&&V.current&&(H.current.style.transform=`${Me}${we}translate(${S}px,${re}px)`,V.current.style.transform=qe(P,1/((b||10)/400)))}else{const S=b===void 0?1:$e(g.current,h)*b;f.style.transform=`translate3d(${c[0]}px,${c[1]}px,0) scale(${S})`}W.current=c,te.current=h.zoom}}if(!I&&w.current&&!D.current)if(d){if(H.current){const c=H.current.children[0];if(c!=null&&c.clientWidth&&c!=null&&c.clientHeight){const{isOrthographicCamera:M}=h;if(M||Z)v.scale&&(Array.isArray(v.scale)?v.scale instanceof B?w.current.scale.copy(v.scale.clone().divideScalar(1)):w.current.scale.set(1/v.scale[0],1/v.scale[1],1/v.scale[2]):w.current.scale.setScalar(1/v.scale));else{const y=(b||10)/400,A=c.clientWidth*y,$=c.clientHeight*y;w.current.scale.set(A,$,1)}D.current=!0}}}else{const c=f.children[0];if(c!=null&&c.clientWidth&&c!=null&&c.clientHeight){const M=1/xe.factor,y=c.clientWidth*M,A=c.clientHeight*M;w.current.scale.set(y,A,1),D.current=!0}w.current.lookAt(p.camera.position)}});const ne=o.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return o.createElement("group",_e({},v,{ref:g}),m&&!I&&o.createElement("mesh",{castShadow:L,receiveShadow:N,ref:w},Z||o.createElement("planeGeometry",null),T||o.createElement("shaderMaterial",{side:Re,vertexShader:ne.vertexShader,fragmentShader:ne.fragmentShader})))}),C={_origin:"https://api.emailjs.com"},Ue=(t,e="https://api.emailjs.com")=>{C._userID=t,C._origin=e},ue=(t,e,r)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class ie{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const me=(t,e,r={})=>new Promise((i,s)=>{const a=new XMLHttpRequest;a.addEventListener("load",({target:l})=>{const u=new ie(l);u.status===200||u.text==="OK"?i(u):s(u)}),a.addEventListener("error",({target:l})=>{s(new ie(l))}),a.open("POST",C._origin+t,!0),Object.keys(r).forEach(l=>{a.setRequestHeader(l,r[l])}),a.send(e)}),Ye=(t,e,r,i)=>{const s=i||C._userID;return ue(s,t,e),me("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:s,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"})},Ze=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},Ke=(t,e,r,i)=>{const s=i||C._userID,a=Ze(r);ue(s,t,e);const l=new FormData(a);return l.append("lib_version","3.11.0"),l.append("service_id",t),l.append("template_id",e),l.append("user_id",s),me("/api/v1.0/email/send-form",l)},Je={init:Ue,send:Ye,sendForm:Ke},Xe=()=>{const[t,e]=o.useState({show:!1,text:"Sent Successfully",type:"success"});return{alert:t,showAlert:({text:s="",type:a="failed"})=>e({show:!0,text:s,type:a}),hideAlert:()=>e({show:!1,text:""})}},Qe=({type:t,text:e})=>n.jsxs("div",{className:"alert",children:[t==="success"?n.jsx("span",{className:" bg-green-tran",children:"Success"}):n.jsx("span",{className:"bg-red-tran",children:"Failed"}),n.jsx("span",{className:" alert-text",children:e})]}),et=""+new URL("robot-YSeUzNpq.glb",import.meta.url).href,tt=({currentAction:t,...e})=>{const r=o.useRef(),{nodes:i,materials:s,animations:a}=Le(et),{actions:l}=Ne(a,r);return o.useEffect(()=>{Object.values(l).forEach(u=>u.stop()),l[t]&&l[t].play()},[t]),n.jsx("group",{ref:r,...e,dispose:null,children:n.jsx("group",{name:"Root_Scene",children:n.jsxs("group",{name:"RootNode",children:[n.jsx("group",{name:"RobotArmature",rotation:[-Math.PI/2,0,0],scale:100,children:n.jsx("primitive",{object:i.Bone})}),n.jsxs("group",{name:"HandR",position:[-.003,2.37,-.021],rotation:[-Math.PI/2,0,0],scale:100,children:[n.jsx("skinnedMesh",{name:"HandR_1",geometry:i.HandR_1.geometry,material:s.Main,skeleton:i.HandR_1.skeleton}),n.jsx("skinnedMesh",{name:"HandR_2",geometry:i.HandR_2.geometry,material:s.Grey,skeleton:i.HandR_2.skeleton})]}),n.jsxs("group",{name:"HandL",position:[-.003,2.37,-.021],rotation:[-Math.PI/2,0,0],scale:100,children:[n.jsx("skinnedMesh",{name:"HandL_1",geometry:i.HandL_1.geometry,material:s.Main,skeleton:i.HandL_1.skeleton}),n.jsx("skinnedMesh",{name:"HandL_2",geometry:i.HandL_2.geometry,material:s.Grey,skeleton:i.HandL_2.skeleton})]})]})})})},st=t=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:16,width:16,viewBox:"0 0 512 512",...t},o.createElement("path",{d:"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"})),nt=()=>{const t=Te();return n.jsx(Ge,{children:n.jsx("div",{className:"relative scale-150 top-[-50px] left-[-50px] flex justify-center items-center",children:t===He.DARK?n.jsx(Ae,{}):n.jsx(Ce,{})})})},it=()=>{const t=o.useRef(),[e,r]=o.useState({name:"",email:"",message:""}),[i,s]=o.useState(j.IDLE),[a,l]=o.useState(!1),{alert:u,showAlert:b,hideAlert:k}=Xe(),d=({target:{name:N,value:T}})=>{r({...e,[N]:T}),s(j.WALK)},m=N=>{N.preventDefault(),l(!0),s(j.RUN),Je.send("service_c4uozx4","template_qbwrwji",{from_name:e.name,to_name:"Yichao",from_email:e.email,to_email:"yichao.wang.work@gmail.com",message:e.message},"j8wZx2OUbayp4fNIM").then(()=>{l(!1),s(j.DANCE),setTimeout(()=>{r({name:"",email:"",message:""}),k(),s(j.IDLE)},2e3),b({type:"success",text:"Sent Successfully"})},T=>{l(!1),s(j.DEATH),console.log(T),b({type:"failed",text:"Failed to Send"}),setTimeout(()=>{k(),s(j.IDLE)},2e3)})},E=()=>s(j.WAVE),L=()=>s(j.IDLE);return n.jsxs("section",{className:"page-content contact-page-container",children:[u.show&&n.jsx(Qe,{...u}),n.jsxs("div",{className:"w-full flex flex-col md:w-1/2 ",children:[n.jsx("h1",{className:"bold-head-text mt-[3.5rem] mb-[2.5rem] uppercase",children:"Get in Touch"}),n.jsxs("form",{ref:t,onSubmit:m,className:"w-full flex flex-col gap-7",children:[n.jsxs("label",{className:"light-text",children:["Name",n.jsx("input",{type:"text",name:"name",className:"input",placeholder:"Yichao",value:e.name,required:!0,onChange:d,onFocus:E,onBlur:L})]}),n.jsxs("label",{className:"light-text",children:["Email",n.jsx("input",{type:"email",name:"email",className:"input email",placeholder:"yichao.wang.work@gmail.com",required:!0,value:e.email,onChange:d,onFocus:E,onBlur:L})]}),n.jsxs("label",{className:"light-text",children:["Your Message",n.jsx("textarea",{name:"message",rows:"4",className:"textarea",placeholder:"Write your thoughts here...",required:!0,value:e.message,onChange:d,onFocus:E,onBlur:L})]}),n.jsx(ke,{name:a?"Sending...":"Submit",disabled:a,icon:()=>n.jsx(st,{})})]})]}),n.jsx("div",{className:"md:w-1/2 w-full lg:h-auto md:h-[650px] h-[340px] center-container",children:n.jsx("div",{className:"w-[30rem] h-[30rem] z-10",children:n.jsx(Fe,{camera:{position:[0,0,6.5],fov:75,near:.1,far:1e3},children:n.jsxs(o.Suspense,{fallback:n.jsx(nt,{}),children:[n.jsx("directionalLight",{position:[0,20,10],intensity:3}),n.jsx("ambientLight",{position:[0,20,0],intensity:1}),n.jsx(tt,{currentAction:i,position:[0,-3.5,0],rotation:[0,-.5,0],scale:[1.3,1.3,1.3]})]})})})})]})};export{it as default};
